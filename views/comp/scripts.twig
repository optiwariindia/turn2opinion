<!-- jQuery -->
<script src="/js/jquery.min.js"></script>
<!-- jQuery Easing -->
<script src="/js/jquery.easing.1.3.js"></script>
<!-- Bootstrap -->
<script src="/js/bootstrap.min.js"></script>
<!-- Waypoints -->
<script src="/js/jquery.waypoints.min.js"></script>
<!-- Stellar Parallax -->
<script src="/js/jquery.stellar.min.js"></script>
<!-- Carousel -->
<script src="/js/owl.carousel.min.js"></script>
<!-- countTo -->
<script src="/js/jquery.countTo.js"></script>
<!-- Magnific Popup -->
<script src="/js/jquery.magnific-popup.min.js"></script>
<script src="/js/magnific-popup-options.js"></script>
<!-- Main -->
<script src="/js/main.js"></script>
<script src="/js/additional.js"></script>

<script src="/js/intlTelInput.js"></script>
<script src="https://www.google.com/recaptcha/api.js"></script>

<script src="/js/script.js"></script>
<script>
	function load(url, callback) {
var xhr = new XMLHttpRequest();

xhr.onreadystatechange = function () {
if (xhr.readyState === 4) {
callback(xhr.response);
}
}

xhr.open('GET', url, true);
xhr.send('');
}
var input = document.querySelector("[type=tel]");
errorMap = [
"Invalid number",
"Invalid country code",
"Too short",
"Too long",
"Invalid number"
];
if (input != null) {

iti = window.intlTelInput(input, {
hiddenInput: "phone_full",
initialCountry: "auto",
geoIpLookup: function (callback) {
fetch("http://ipinfo.io/?token=192c83fcdac0ea", {crossorigin: 1}).then(resp => resp.json()).then(info => {
let cnt = window.intlTelInputGlobals.getCountryData().find(c => {
return(c.iso2 == info.country.toLowerCase())
});
document.querySelector("[name=cn]").value = cnt.name;
callback(info.country);
});
},
utilsScript: "/js/utils.js"
});

var reset = function () {
input.classList.remove("error");
errorMsg = document.querySelector("#error-msg");
validMsg = document.querySelector("#valid-msg");
errorMsg.innerHTML = "";
errorMsg.classList.add("hide");
validMsg.classList.add("hide");
};

// on blur: validate
input.addEventListener('blur', function () {
reset();
if (input.value.trim()) {
errorMsg = document.querySelector("#error-msg");
validMsg = document.querySelector("#valid-msg");
if (iti.isValidNumber()) {
validMsg.classList.remove("hide");
} else {
input.classList.add("error");
var errorCode = iti.getValidationError();
errorMsg.innerHTML = errorMap[errorCode];
errorMsg.classList.remove("hide");
}
}
});

// on keyup / change flag: reset
input.addEventListener('change', reset);
input.addEventListener('keyup', reset);
}
</script>
